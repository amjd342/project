{"ast":null,"code":"// Database utility functions for local JSON storage\n// In a real app, this would connect to Supabase or another backend\n\nconst DB_KEY = 'usaruna_database';\nlet currentDB = null; // ðŸ‘ˆ Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ± Ø­Ø§Ù„Ø© Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆØ­Ø¯Ø© Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØª\n\n// Initialize database from JSON file or localStorage\nexport const initDatabase = async () => {\n  // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©\n  if (currentDB) return currentDB;\n  const stored = localStorage.getItem(DB_KEY);\n  if (stored) {\n    currentDB = JSON.parse(stored); // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©\n    return currentDB;\n  }\n\n  // Load initial data from JSON file\n  try {\n    const response = await fetch('/data/database.json');\n    if (!response.ok) {\n      throw new Error(`Failed to fetch database: ${response.statusText}`);\n    }\n    const data = await response.json();\n    localStorage.setItem(DB_KEY, JSON.stringify(data));\n    currentDB = data; // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©\n    return data;\n  } catch (error) {\n    // Default empty database structure\n    const defaultDB = {\n      users: [],\n      products: [],\n      orders: [],\n      cart: [],\n      reviews: []\n    };\n    localStorage.setItem(DB_KEY, JSON.stringify(defaultDB));\n    currentDB = defaultDB; // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©\n    return defaultDB;\n  }\n};\n\n// Get current database state\nexport const getDatabase = () => {\n  // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø£ÙˆÙ„Ø§Ù‹\n  if (currentDB) return currentDB;\n  const stored = localStorage.getItem(DB_KEY);\n  if (stored) {\n    currentDB = JSON.parse(stored); // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¬Ù„Ø¨ Ù…Ù† localStorage\n    return currentDB;\n  }\n  return null;\n};\n\n// Save database to localStorage\nexport const saveDatabase = data => {\n  currentDB = data; // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸\n  localStorage.setItem(DB_KEY, JSON.stringify(data));\n};\n\n// Generate unique ID\nexport const generateId = (prefix = 'id') => {\n  return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n};\n\n// ==================== USER OPERATIONS ====================\n\n// Find user by email\nexport const findUserByEmail = email => {\n  const db = getDatabase();\n  if (!db) return null;\n  return db.users.find(user => user.email.toLowerCase() === email.toLowerCase());\n};\n\n// Find user by ID\nexport const findUserById = id => {\n  const db = getDatabase();\n  if (!db) return null;\n  return db.users.find(user => user.id === id);\n};\n\n// Create new user\nexport const createUser = userData => {\n  const db = getDatabase();\n  if (!db) return null;\n\n  // Check if email already exists\n  if (findUserByEmail(userData.email)) {\n    throw new Error('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹ - Email already registered');\n  }\n  const newUser = {\n    id: generateId('user'),\n    ...userData,\n    verified: false,\n    createdAt: new Date().toISOString(),\n    profileImage: null\n  };\n  db.users.push(newUser);\n  saveDatabase(db);\n\n  // Return user without password\n  const {\n    password,\n    ...userWithoutPassword\n  } = newUser;\n  return userWithoutPassword;\n};\n\n// Update user\nexport const updateUser = (userId, updates) => {\n  const db = getDatabase();\n  if (!db) return null;\n  const userIndex = db.users.findIndex(user => user.id === userId);\n  if (userIndex === -1) return null;\n  db.users[userIndex] = {\n    ...db.users[userIndex],\n    ...updates\n  };\n  saveDatabase(db);\n  const {\n    password,\n    ...userWithoutPassword\n  } = db.users[userIndex];\n  return userWithoutPassword;\n};\n\n// Validate user credentials\nexport const validateCredentials = (email, password) => {\n  const user = findUserByEmail(email);\n  if (!user) return null;\n\n  // Simple password comparison (in production, use bcrypt)\n  if (user.password !== password) return null;\n  const {\n    password: pwd,\n    ...userWithoutPassword\n  } = user;\n  return userWithoutPassword;\n};\n\n// ==================== PRODUCT OPERATIONS ====================\n\n// Get all products\nexport const getAllProducts = () => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.products;\n};\n\n// Get products by seller\nexport const getProductsBySeller = sellerId => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.products.filter(product => product.sellerId === sellerId);\n};\n\n// Get product by ID\nexport const getProductById = productId => {\n  const db = getDatabase();\n  if (!db) return null;\n  return db.products.find(product => product.id === productId);\n};\n\n// Create product\nexport const createProduct = productData => {\n  const db = getDatabase();\n  if (!db) return null;\n  const newProduct = {\n    id: generateId('prod'),\n    ...productData,\n    rating: 0,\n    reviewCount: 0,\n    createdAt: new Date().toISOString(),\n    featured: false\n  };\n  db.products.push(newProduct);\n  saveDatabase(db);\n  return newProduct;\n};\n\n// Update product\nexport const updateProduct = (productId, updates) => {\n  const db = getDatabase();\n  if (!db) return null;\n  const productIndex = db.products.findIndex(p => p.id === productId);\n  if (productIndex === -1) return null;\n  db.products[productIndex] = {\n    ...db.products[productIndex],\n    ...updates\n  };\n  saveDatabase(db);\n  return db.products[productIndex];\n};\n\n// Delete product\nexport const deleteProduct = productId => {\n  const db = getDatabase();\n  if (!db) return false;\n  const productIndex = db.products.findIndex(p => p.id === productId);\n  if (productIndex === -1) return false;\n  db.products.splice(productIndex, 1);\n  saveDatabase(db);\n  return true;\n};\n\n// Search products\nexport const searchProducts = query => {\n  const db = getDatabase();\n  if (!db) return [];\n  const lowerQuery = query.toLowerCase();\n  return db.products.filter(product => product.name.toLowerCase().includes(lowerQuery) || product.nameEn.toLowerCase().includes(lowerQuery) || product.description.toLowerCase().includes(lowerQuery) || product.descriptionEn.toLowerCase().includes(lowerQuery) || product.category.toLowerCase().includes(lowerQuery));\n};\n\n// Get products by category\nexport const getProductsByCategory = category => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.products.filter(product => product.category === category);\n};\n\n// Get featured products\nexport const getFeaturedProducts = () => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.products.filter(product => product.featured);\n};\n\n// ==================== CART OPERATIONS ====================\n\n// Get user cart\nexport const getUserCart = userId => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.cart.filter(item => item.userId === userId);\n};\n\n// Add to cart\nexport const addToCart = (userId, productId, quantity = 1) => {\n  const db = getDatabase();\n  if (!db) return null;\n  const existingIndex = db.cart.findIndex(item => item.userId === userId && item.productId === productId);\n  if (existingIndex !== -1) {\n    db.cart[existingIndex].quantity += quantity;\n  } else {\n    db.cart.push({\n      id: generateId('cart'),\n      userId,\n      productId,\n      quantity,\n      addedAt: new Date().toISOString()\n    });\n  }\n  saveDatabase(db);\n  return getUserCart(userId);\n};\n\n// Update cart item quantity\nexport const updateCartQuantity = (userId, productId, quantity) => {\n  const db = getDatabase();\n  if (!db) return null;\n  const itemIndex = db.cart.findIndex(item => item.userId === userId && item.productId === productId);\n  if (itemIndex === -1) return null;\n  if (quantity <= 0) {\n    db.cart.splice(itemIndex, 1);\n  } else {\n    db.cart[itemIndex].quantity = quantity;\n  }\n  saveDatabase(db);\n  return getUserCart(userId);\n};\n\n// Remove from cart\nexport const removeFromCart = (userId, productId) => {\n  const db = getDatabase();\n  if (!db) return null;\n  db.cart = db.cart.filter(item => !(item.userId === userId && item.productId === productId));\n  saveDatabase(db);\n  return getUserCart(userId);\n};\n\n// Clear user cart\nexport const clearCart = userId => {\n  const db = getDatabase();\n  if (!db) return null;\n  db.cart = db.cart.filter(item => item.userId !== userId);\n  saveDatabase(db);\n  return [];\n};\n\n// ==================== ORDER OPERATIONS ====================\n\n// Create order\nexport const createOrder = orderData => {\n  const db = getDatabase();\n  if (!db) return null;\n  const newOrder = {\n    id: generateId('order'),\n    ...orderData,\n    status: 'pending',\n    createdAt: new Date().toISOString()\n  };\n  db.orders.push(newOrder);\n  saveDatabase(db);\n  return newOrder;\n};\n\n// Get user orders\nexport const getUserOrders = userId => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.orders.filter(order => order.userId === userId);\n};\n\n// Get seller orders\nexport const getSellerOrders = sellerId => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.orders.filter(order => order.sellerId === sellerId);\n};\n\n// Update order status\nexport const updateOrderStatus = (orderId, status) => {\n  const db = getDatabase();\n  if (!db) return null;\n  const orderIndex = db.orders.findIndex(o => o.id === orderId);\n  if (orderIndex === -1) return null;\n  db.orders[orderIndex].status = status;\n  db.orders[orderIndex].updatedAt = new Date().toISOString();\n  saveDatabase(db);\n  return db.orders[orderIndex];\n};\n\n// ==================== REVIEW OPERATIONS ====================\n\n// Add review\nexport const addReview = reviewData => {\n  const db = getDatabase();\n  if (!db) return null;\n  const newReview = {\n    id: generateId('review'),\n    ...reviewData,\n    createdAt: new Date().toISOString()\n  };\n  db.reviews.push(newReview);\n\n  // Update product rating\n  const productReviews = db.reviews.filter(r => r.productId === reviewData.productId);\n  const avgRating = productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length;\n  const productIndex = db.products.findIndex(p => p.id === reviewData.productId);\n  if (productIndex !== -1) {\n    db.products[productIndex].rating = Math.round(avgRating * 10) / 10;\n    db.products[productIndex].reviewCount = productReviews.length;\n  }\n  saveDatabase(db);\n  return newReview;\n};\n\n// Get product reviews\nexport const getProductReviews = productId => {\n  const db = getDatabase();\n  if (!db) return [];\n  return db.reviews.filter(review => review.productId === productId);\n};\nexport default {\n  initDatabase,\n  getDatabase,\n  saveDatabase,\n  generateId,\n  findUserByEmail,\n  findUserById,\n  createUser,\n  updateUser,\n  validateCredentials,\n  getAllProducts,\n  getProductsBySeller,\n  getProductById,\n  createProduct,\n  updateProduct,\n  deleteProduct,\n  searchProducts,\n  getProductsByCategory,\n  getFeaturedProducts,\n  getUserCart,\n  addToCart,\n  updateCartQuantity,\n  removeFromCart,\n  clearCart,\n  createOrder,\n  getUserOrders,\n  getSellerOrders,\n  updateOrderStatus,\n  addReview,\n  getProductReviews\n};","map":{"version":3,"names":["DB_KEY","currentDB","initDatabase","stored","localStorage","getItem","JSON","parse","response","fetch","ok","Error","statusText","data","json","setItem","stringify","error","defaultDB","users","products","orders","cart","reviews","getDatabase","saveDatabase","generateId","prefix","Date","now","Math","random","toString","substr","findUserByEmail","email","db","find","user","toLowerCase","findUserById","id","createUser","userData","newUser","verified","createdAt","toISOString","profileImage","push","password","userWithoutPassword","updateUser","userId","updates","userIndex","findIndex","validateCredentials","pwd","getAllProducts","getProductsBySeller","sellerId","filter","product","getProductById","productId","createProduct","productData","newProduct","rating","reviewCount","featured","updateProduct","productIndex","p","deleteProduct","splice","searchProducts","query","lowerQuery","name","includes","nameEn","description","descriptionEn","category","getProductsByCategory","getFeaturedProducts","getUserCart","item","addToCart","quantity","existingIndex","addedAt","updateCartQuantity","itemIndex","removeFromCart","clearCart","createOrder","orderData","newOrder","status","getUserOrders","order","getSellerOrders","updateOrderStatus","orderId","orderIndex","o","updatedAt","addReview","reviewData","newReview","productReviews","r","avgRating","reduce","sum","length","round","getProductReviews","review"],"sources":["C:/Users/Ø§Ù…Ø¬Ø¯ Ø§Ù„Ø³Ù„Ù…ÙŠ/OneDrive/Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª/GitHub/project/src/utils/database.js"],"sourcesContent":["// Database utility functions for local JSON storage\r\n// In a real app, this would connect to Supabase or another backend\r\n\r\nconst DB_KEY = 'usaruna_database';\r\nlet currentDB = null; // ðŸ‘ˆ Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ± Ø­Ø§Ù„Ø© Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆØ­Ø¯Ø© Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØª\r\n\r\n// Initialize database from JSON file or localStorage\r\nexport const initDatabase = async () => {\r\n    // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©\r\n    if (currentDB) return currentDB;\r\n\r\n    const stored = localStorage.getItem(DB_KEY);\r\n    if (stored) {\r\n        currentDB = JSON.parse(stored); // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©\r\n        return currentDB;\r\n    }\r\n    \r\n    // Load initial data from JSON file\r\n    try {\r\n        const response = await fetch('/data/database.json');\r\n        if (!response.ok) {\r\n             throw new Error(`Failed to fetch database: ${response.statusText}`);\r\n        }\r\n        const data = await response.json();\r\n        localStorage.setItem(DB_KEY, JSON.stringify(data));\r\n        currentDB = data; // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©\r\n        return data;\r\n    } catch (error) {\r\n        // Default empty database structure\r\n        const defaultDB = {\r\n            users: [],\r\n            products: [],\r\n            orders: [],\r\n            cart: [],\r\n            reviews: []\r\n        };\r\n        localStorage.setItem(DB_KEY, JSON.stringify(defaultDB));\r\n        currentDB = defaultDB; // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©\r\n        return defaultDB;\r\n    }\r\n};\r\n\r\n// Get current database state\r\nexport const getDatabase = () => {\r\n    // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø£ÙˆÙ„Ø§Ù‹\r\n    if (currentDB) return currentDB; \r\n\r\n    const stored = localStorage.getItem(DB_KEY);\r\n    if (stored) {\r\n        currentDB = JSON.parse(stored); // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¬Ù„Ø¨ Ù…Ù† localStorage\r\n        return currentDB;\r\n    }\r\n    return null;\r\n};\r\n\r\n// Save database to localStorage\r\nexport const saveDatabase = (data) => {\r\n    currentDB = data; // ðŸ‘ˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸\r\n    localStorage.setItem(DB_KEY, JSON.stringify(data));\r\n};\r\n\r\n// Generate unique ID\r\nexport const generateId = (prefix = 'id') => {\r\n    return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n};\r\n\r\n// ==================== USER OPERATIONS ====================\r\n\r\n// Find user by email\r\nexport const findUserByEmail = (email) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    return db.users.find(user => user.email.toLowerCase() === email.toLowerCase());\r\n};\r\n\r\n// Find user by ID\r\nexport const findUserById = (id) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    return db.users.find(user => user.id === id);\r\n};\r\n\r\n// Create new user\r\nexport const createUser = (userData) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    // Check if email already exists\r\n    if (findUserByEmail(userData.email)) {\r\n        throw new Error('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹ - Email already registered');\r\n    }\r\n    \r\n    const newUser = {\r\n        id: generateId('user'),\r\n        ...userData,\r\n        verified: false,\r\n        createdAt: new Date().toISOString(),\r\n        profileImage: null\r\n    };\r\n    \r\n    db.users.push(newUser);\r\n    saveDatabase(db);\r\n    \r\n    // Return user without password\r\n    const { password, ...userWithoutPassword } = newUser;\r\n    return userWithoutPassword;\r\n};\r\n\r\n// Update user\r\nexport const updateUser = (userId, updates) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const userIndex = db.users.findIndex(user => user.id === userId);\r\n    if (userIndex === -1) return null;\r\n    \r\n    db.users[userIndex] = { ...db.users[userIndex], ...updates };\r\n    saveDatabase(db);\r\n    \r\n    const { password, ...userWithoutPassword } = db.users[userIndex];\r\n    return userWithoutPassword;\r\n};\r\n\r\n// Validate user credentials\r\nexport const validateCredentials = (email, password) => {\r\n    const user = findUserByEmail(email);\r\n    if (!user) return null;\r\n    \r\n    // Simple password comparison (in production, use bcrypt)\r\n    if (user.password !== password) return null;\r\n    \r\n    const { password: pwd, ...userWithoutPassword } = user;\r\n    return userWithoutPassword;\r\n};\r\n\r\n// ==================== PRODUCT OPERATIONS ====================\r\n\r\n// Get all products\r\nexport const getAllProducts = () => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.products;\r\n};\r\n\r\n// Get products by seller\r\nexport const getProductsBySeller = (sellerId) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.products.filter(product => product.sellerId === sellerId);\r\n};\r\n\r\n// Get product by ID\r\nexport const getProductById = (productId) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    return db.products.find(product => product.id === productId);\r\n};\r\n\r\n// Create product\r\nexport const createProduct = (productData) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const newProduct = {\r\n        id: generateId('prod'),\r\n        ...productData,\r\n        rating: 0,\r\n        reviewCount: 0,\r\n        createdAt: new Date().toISOString(),\r\n        featured: false\r\n    };\r\n    \r\n    db.products.push(newProduct);\r\n    saveDatabase(db);\r\n    return newProduct;\r\n};\r\n\r\n// Update product\r\nexport const updateProduct = (productId, updates) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const productIndex = db.products.findIndex(p => p.id === productId);\r\n    if (productIndex === -1) return null;\r\n    \r\n    db.products[productIndex] = { ...db.products[productIndex], ...updates };\r\n    saveDatabase(db);\r\n    return db.products[productIndex];\r\n};\r\n\r\n// Delete product\r\nexport const deleteProduct = (productId) => {\r\n    const db = getDatabase();\r\n    if (!db) return false;\r\n    \r\n    const productIndex = db.products.findIndex(p => p.id === productId);\r\n    if (productIndex === -1) return false;\r\n    \r\n    db.products.splice(productIndex, 1);\r\n    saveDatabase(db);\r\n    return true;\r\n};\r\n\r\n// Search products\r\nexport const searchProducts = (query) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    \r\n    const lowerQuery = query.toLowerCase();\r\n    return db.products.filter(product => \r\n        product.name.toLowerCase().includes(lowerQuery) ||\r\n        product.nameEn.toLowerCase().includes(lowerQuery) ||\r\n        product.description.toLowerCase().includes(lowerQuery) ||\r\n        product.descriptionEn.toLowerCase().includes(lowerQuery) ||\r\n        product.category.toLowerCase().includes(lowerQuery)\r\n    );\r\n};\r\n\r\n// Get products by category\r\nexport const getProductsByCategory = (category) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.products.filter(product => product.category === category);\r\n};\r\n\r\n// Get featured products\r\nexport const getFeaturedProducts = () => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.products.filter(product => product.featured);\r\n};\r\n\r\n// ==================== CART OPERATIONS ====================\r\n\r\n// Get user cart\r\nexport const getUserCart = (userId) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.cart.filter(item => item.userId === userId);\r\n};\r\n\r\n// Add to cart\r\nexport const addToCart = (userId, productId, quantity = 1) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const existingIndex = db.cart.findIndex(\r\n        item => item.userId === userId && item.productId === productId\r\n    );\r\n    \r\n    if (existingIndex !== -1) {\r\n        db.cart[existingIndex].quantity += quantity;\r\n    } else {\r\n        db.cart.push({\r\n            id: generateId('cart'),\r\n            userId,\r\n            productId,\r\n            quantity,\r\n            addedAt: new Date().toISOString()\r\n        });\r\n    }\r\n    \r\n    saveDatabase(db);\r\n    return getUserCart(userId);\r\n};\r\n\r\n// Update cart item quantity\r\nexport const updateCartQuantity = (userId, productId, quantity) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const itemIndex = db.cart.findIndex(\r\n        item => item.userId === userId && item.productId === productId\r\n    );\r\n    \r\n    if (itemIndex === -1) return null;\r\n    \r\n    if (quantity <= 0) {\r\n        db.cart.splice(itemIndex, 1);\r\n    } else {\r\n        db.cart[itemIndex].quantity = quantity;\r\n    }\r\n    \r\n    saveDatabase(db);\r\n    return getUserCart(userId);\r\n};\r\n\r\n// Remove from cart\r\nexport const removeFromCart = (userId, productId) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    db.cart = db.cart.filter(\r\n        item => !(item.userId === userId && item.productId === productId)\r\n    );\r\n    \r\n    saveDatabase(db);\r\n    return getUserCart(userId);\r\n};\r\n\r\n// Clear user cart\r\nexport const clearCart = (userId) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    db.cart = db.cart.filter(item => item.userId !== userId);\r\n    saveDatabase(db);\r\n    return [];\r\n};\r\n\r\n// ==================== ORDER OPERATIONS ====================\r\n\r\n// Create order\r\nexport const createOrder = (orderData) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const newOrder = {\r\n        id: generateId('order'),\r\n        ...orderData,\r\n        status: 'pending',\r\n        createdAt: new Date().toISOString()\r\n    };\r\n    \r\n    db.orders.push(newOrder);\r\n    saveDatabase(db);\r\n    return newOrder;\r\n};\r\n\r\n// Get user orders\r\nexport const getUserOrders = (userId) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.orders.filter(order => order.userId === userId);\r\n};\r\n\r\n// Get seller orders\r\nexport const getSellerOrders = (sellerId) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.orders.filter(order => order.sellerId === sellerId);\r\n};\r\n\r\n// Update order status\r\nexport const updateOrderStatus = (orderId, status) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const orderIndex = db.orders.findIndex(o => o.id === orderId);\r\n    if (orderIndex === -1) return null;\r\n    \r\n    db.orders[orderIndex].status = status;\r\n    db.orders[orderIndex].updatedAt = new Date().toISOString();\r\n    saveDatabase(db);\r\n    return db.orders[orderIndex];\r\n};\r\n\r\n// ==================== REVIEW OPERATIONS ====================\r\n\r\n// Add review\r\nexport const addReview = (reviewData) => {\r\n    const db = getDatabase();\r\n    if (!db) return null;\r\n    \r\n    const newReview = {\r\n        id: generateId('review'),\r\n        ...reviewData,\r\n        createdAt: new Date().toISOString()\r\n    };\r\n    \r\n    db.reviews.push(newReview);\r\n    \r\n    // Update product rating\r\n    const productReviews = db.reviews.filter(r => r.productId === reviewData.productId);\r\n    const avgRating = productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length;\r\n    \r\n    const productIndex = db.products.findIndex(p => p.id === reviewData.productId);\r\n    if (productIndex !== -1) {\r\n        db.products[productIndex].rating = Math.round(avgRating * 10) / 10;\r\n        db.products[productIndex].reviewCount = productReviews.length;\r\n    }\r\n    \r\n    saveDatabase(db);\r\n    return newReview;\r\n};\r\n\r\n// Get product reviews\r\nexport const getProductReviews = (productId) => {\r\n    const db = getDatabase();\r\n    if (!db) return [];\r\n    return db.reviews.filter(review => review.productId === productId);\r\n};\r\n\r\nexport default {\r\n    initDatabase,\r\n    getDatabase,\r\n    saveDatabase,\r\n    generateId,\r\n    findUserByEmail,\r\n    findUserById,\r\n    createUser,\r\n    updateUser,\r\n    validateCredentials,\r\n    getAllProducts,\r\n    getProductsBySeller,\r\n    getProductById,\r\n    createProduct,\r\n    updateProduct,\r\n    deleteProduct,\r\n    searchProducts,\r\n    getProductsByCategory,\r\n    getFeaturedProducts,\r\n    getUserCart,\r\n    addToCart,\r\n    updateCartQuantity,\r\n    removeFromCart,\r\n    clearCart,\r\n    createOrder,\r\n    getUserOrders,\r\n    getSellerOrders,\r\n    updateOrderStatus,\r\n    addReview,\r\n    getProductReviews\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}