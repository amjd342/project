{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRole=null,redirectTo='/login'}=_ref;const{user,isAuthenticated,loading}=useAuth();const location=useLocation();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner lg\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'var(--space-lg)',color:'var(--gray-600)'},children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642...\"})]})});}if(!isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:redirectTo,state:{from:location,message:'يجب تسجيل الدخول للوصول إلى هذه الصفحة'},replace:true});}if(requiredRole&&(user===null||user===void 0?void 0:user.role)!==requiredRole){if((user===null||user===void 0?void 0:user.role)==='seller'&&requiredRole==='buyer'){return/*#__PURE__*/_jsx(Navigate,{to:\"/seller/dashboard\",state:{message:'هذه الصفحة للمشترين فقط'},replace:true});}if((user===null||user===void 0?void 0:user.role)==='buyer'&&requiredRole==='seller'){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",state:{message:'هذه الصفحة للبائعين فقط'},replace:true});}return/*#__PURE__*/_jsx(Navigate,{to:\"/\",state:{message:'ليس لديك صلاحية للوصول إلى هذه الصفحة'},replace:true});}return children;};export const GuestRoute=_ref2=>{let{children,redirectTo='/'}=_ref2;const{isAuthenticated,loading,user}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner lg\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'var(--space-lg)',color:'var(--gray-600)'},children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})]})});}if(isAuthenticated()){const destination=(user===null||user===void 0?void 0:user.role)==='seller'?'/seller/dashboard':redirectTo;return/*#__PURE__*/_jsx(Navigate,{to:destination,replace:true});}return children;};export const SellerRoute=_ref3=>{let{children}=_ref3;return/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"seller\",children:children});};export const BuyerRoute=_ref4=>{let{children}=_ref4;return/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"buyer\",children:children});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","requiredRole","redirectTo","user","isAuthenticated","loading","location","className","style","textAlign","marginTop","color","to","state","from","message","replace","role","GuestRoute","_ref2","destination","SellerRoute","_ref3","BuyerRoute","_ref4"],"sources":["C:/Users/امجد السلمي/OneDrive/المستندات/GitHub/project/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ \r\n  children, \r\n  requiredRole = null,\r\n  redirectTo = '/login' \r\n}) => {\r\n  const { user, isAuthenticated, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-overlay\">\r\n        <div style={{ textAlign: 'center' }}>\r\n          <div className=\"loading-spinner lg\"></div>\r\n          <p style={{ marginTop: 'var(--space-lg)', color: 'var(--gray-600)' }}>\r\n            جاري التحقق...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated()) {\r\n    return (\r\n      <Navigate \r\n        to={redirectTo} \r\n        state={{ \r\n          from: location,\r\n          message: 'يجب تسجيل الدخول للوصول إلى هذه الصفحة'\r\n        }} \r\n        replace \r\n      />\r\n    );\r\n  }\r\n\r\n  if (requiredRole && user?.role !== requiredRole) {\r\n    if (user?.role === 'seller' && requiredRole === 'buyer') {\r\n      return (\r\n        <Navigate \r\n          to=\"/seller/dashboard\" \r\n          state={{ message: 'هذه الصفحة للمشترين فقط' }}\r\n          replace \r\n        />\r\n      );\r\n    }\r\n    \r\n    if (user?.role === 'buyer' && requiredRole === 'seller') {\r\n      return (\r\n        <Navigate \r\n          to=\"/\" \r\n          state={{ message: 'هذه الصفحة للبائعين فقط' }}\r\n          replace \r\n        />\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <Navigate \r\n        to=\"/\" \r\n        state={{ message: 'ليس لديك صلاحية للوصول إلى هذه الصفحة' }}\r\n        replace \r\n      />\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport const GuestRoute = ({ children, redirectTo = '/' }) => {\r\n  const { isAuthenticated, loading, user } = useAuth();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-overlay\">\r\n        <div style={{ textAlign: 'center' }}>\r\n          <div className=\"loading-spinner lg\"></div>\r\n          <p style={{ marginTop: 'var(--space-lg)', color: 'var(--gray-600)' }}>\r\n            جاري التحميل...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isAuthenticated()) {\r\n    const destination = user?.role === 'seller' \r\n      ? '/seller/dashboard' \r\n      : redirectTo;\r\n    \r\n    return <Navigate to={destination} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport const SellerRoute = ({ children }) => {\r\n  return (\r\n    <ProtectedRoute requiredRole=\"seller\">\r\n      {children}\r\n    </ProtectedRoute>\r\n  );\r\n};\r\n\r\nexport const BuyerRoute = ({ children }) => {\r\n  return (\r\n    <ProtectedRoute requiredRole=\"buyer\">\r\n      {children}\r\n    </ProtectedRoute>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}